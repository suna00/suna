[
  {
    "typeId" : "apiCategory",
    "id" : "purchaseOrder",
    "categoryName" : "주문서 API"
  },
  {
    "typeId" : "apiConfig",
    "category" : "purchaseOrder",
    "apiId" : "read",
    "apiName" : "주문서 조회",
    "method" : "GET",
    "parameters" : [
    ],
    "config" : {
      "item" : {
        "select" : {
          "ds" : "ytnDevDb",
          "resultType" : "read",
          "sql" : "SELECT odr.*, (totalProductPrice + totalDeliveryPrice - totalDiscountPrice) AS totalOrderPrice FROM (SELECT a.purchaseOrderId, a.memberNo, a.siteId, a.sessionId, (SELECT ifnull(sum(orderPrice), 0) FROM orderproduct WHERE purchaseOrderId = a.purchaseOrderId) AS totalProductPrice, (SELECT ifnull(sum(deliveryPrice), 0) FROM orderdeliveryprice WHERE purchaseOrderId = a.purchaseOrderId) AS totalDeliveryPrice, 0 AS totalDiscountPrice FROM purchaseorder a WHERE purchaseOrderId = 1 OR sessionId = '{{:sessionId}}') odr"
        }
      },
      "referencedOrderProduct" : {
        "typeId" : "orderProduct",
        "query" : [
          {"sorting" : "orderDeliveryPriceId desc,created desc"},
          {"field" : "orderId", "method" : "matching", "value" : "{{:orderId}}"},
          {"includeReferenced" : true, "referenceView": "productId"}
        ]
      }
    }
  }
]