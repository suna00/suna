[
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv001",
    "apiName": "MWAVE 투표 목록조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "page",
        "required": false
      },
      {
        "paramName": "pageSize",
        "required": false
      },
      {
        "paramName": "sorting",
        "required": false
      },
      {
        "paramName": "langCd",
        "required": false
      },
      {
        "paramName": "voteFormlCd",
        "required": false
      },
      {
        "paramName": "showLoCd",
        "required": false
      },
      {
        "paramName": "searchKeyword",
        "required": false
      },
      {
        "paramName": "progYn",
        "required": false
      }
    ],
    "config": {
      "typeId": "voteBasInfo",
      "query": [
        {
          "field": "voteFormlCd",
          "method": "matching",
          "value": "{{:voteFormlCd}}"
        },
        {
          "field": "showLoCd",
          "method": "matching",
          "value": "{{:showLoCd}}"
        },
        {
          "field": "findKywrd",
          "method": "matching",
          "value": "{{:searchKeyword}}"
        },
        {
          "field": "pstngStDt",
          "method": "below",
          "value": "{{:conditionSysdate(progYn,true)}}"
        },
        {
          "field": "pstngFnsDt",
          "method": "above",
          "value": "{{:conditionSysdate(progYn,true)}}"
        },
        {
          "field": "pstngFnsDt",
          "method": "under",
          "value": "{{:conditionSysdate(progYn,false)}}"
        },
        {
          "field": "showYn",
          "method": "matching",
          "value": "true"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        },
        {
          "includeReferenced": true,
          "referenceView":"refdSeriesItemList"
        }
      ],
      "response":{
        "_all_": "",
        "refdSeriesItemList": {
          "typeId":"sersVoteItemInfo",
          "query": [
            {
              "field": "voteSeq",
              "method": "referenceJoin",
              "value": "voteSeq_matching={{:voteSeq}}"
            },
            {
              "referenceView": "sersItemVoteSeq",
              "includeReferenced": true
            }
          ]
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv002",
    "apiName": "MWAVE 투표 상세조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "langCd",
        "required": false
      },
      {
        "paramName": "voteSeq",
        "required": false
      },
      {
        "paramName": "voteYear",
        "required": false
      },
      {
        "paramName": "showLoCd",
        "required": false
      },
      {
        "paramName": "voteFormlCd",
        "required": false
      }
    ],
    "config": {
      "typeId": "voteBasInfo",
      "query": [
        {
          "field": "voteSeq",
          "method": "matching",
          "value": "{{:voteSeq}}"
        },
        {
          "field": "voteYear",
          "method": "matching",
          "value": "{{:voteYear}}"
        },
        {
          "field": "showLoCd",
          "method": "matching",
          "value": "{{:showLoCd}}"
        },
        {
          "field": "voteFormlCd",
          "method": "matching",
          "value": "{{:voteFormlCd}}"
        },
        {
          "field": "showYn",
          "method": "matching",
          "value": "true"
        },
        {
          "sorting": "voteSeq desc"
        },
        {
          "limit": "1"
        },
        {
          "referenceView": "sersItemVoteSeq",
          "includeReferenced": true
        }
      ],
      "response": {
        "_all_": "",
        "refdItemList": {
          "typeId": "voteItemInfo",
          "query": [
            {
              "field": "voteSeq",
              "method": "referenceJoin",
              "value": "voteSeq_matching={{:voteSeq}}"
            },
            {
              "referenceView": "contsMetaId"
            }
          ]
        },
        "refdSeriesItemList": {
          "typeId": "sersVoteItemInfo",
          "query": [
            {
              "field": "voteSeq",
              "method": "referenceJoin",
              "value": "voteSeq_matching={{:voteSeq}}"
            },
            {
              "referenceView": "sersItemVoteSeq"
            }
          ]
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv003",
    "apiName": "MWAVE 투표하기",
    "method": "POST",
    "parameters": [
      {
        "paramName": "voteSeq",
        "required": true
      },
      {
        "paramName": "voteQueiSeq",
        "required": true
      },
      {
        "paramName": "snsKey",
        "required": true
      },
      {
        "paramName": "snsTypeCd",
        "required": true
      }
    ],
    "config": {
      "createItem": {
        "typeId": "votePrtcptHst",
        "event": "save",
        "data": {
          "voteSeq": "{{:voteSeq}}",
          "voteItemSeq": "{{:voteQueiSeq}}",
          "prtcpMbrId": "{{:snsTypeCd}}>{{:snsKey}}"
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv004",
    "apiName": "투표 당첨자 조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "page",
        "required": false
      },
      {
        "paramName": "pageSize",
        "required": false
      },
      {
        "paramName": "sorting",
        "required": false
      },
      {
        "paramName": "langCd",
        "required": false
      },
      {
        "paramName": "voteSeq",
        "required": true
      }
    ],
    "config": {
      "typeId": "votePwnrInfo",
      "query": [
        {
          "field": "pwnrBasSeq",
          "method": "referenceJoin",
          "value": "voteSeq_matching={{:voteSeq}}&limit=1"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ],
      "response": {
        "voteSeq": {
          "value": "{{:voteSeq}}"
        },
        "votePwnrSeq": "",
        "mbrId": "",
        "mbrFirstName": "",
        "mbrLastName": "",
        "email": "",
        "mblNo": "",
        "homeAdr": "",
        "memo": "",
        "prtcpDate": "created"
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv100",
    "apiName": "MWAVE 투표결과 목록조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "voteFormlCd",
        "required": true
      },
      {
        "paramName": "showLoCd",
        "required": true
      }
    ],
    "config": {
      "typeId": "voteBasInfo",
      "query": [
        {
          "field": "voteFormlCd",
          "method": "matching",
          "value": "{{:voteFormlCd}}"
        },
        {
          "field": "showLoCd",
          "method": "matching",
          "value": "{{:showLoCd}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ],
      "response": {
        "voteSeq": "",
        "voteFormlCd": "",
        "voteNm": "",
        "voteDesc": "",
        "pstngStDt": "",
        "pstngFnsDt": "",
        "topRankItem": {
          "typeId": "voteItemStats",
          "query": [
            {
              "field": "voteSeq",
              "method": "matching",
              "value": "{{:voteSeq}}"
            },
            {
              "field": "rankNum",
              "method": "matching",
              "value": "1"
            },
            {
              "referenceView": "voteItemSeq"
            }
          ]
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv101",
    "apiName": "투표내역 상세",
    "method": "GET",
    "parameters": [
      {
        "paramName": "voteSeq",
        "required": true
      },
      {
        "paramName": "snsKey",
        "required": true
      },
      {
        "paramName": "snsTypeCd",
        "required": true
      }
    ],
    "config": {
      "typeId": "voteBasInfo",
      "id": "{{:voteSeq}}",
      "response": {
        "_all_": "",
        "refdItemList": {
          "typeId": "voteItemInfo",
          "query": [
            {
              "field": "voteSeq",
              "method": "referenceJoin",
              "value": "voteSeq_matching={{:voteSeq}}"
            },
            {
              "sorting": "sortOdrg"
            }
          ],
          "response": {
            "_all_": "",
            "stats": {
              "typeId": "voteItemStats",
              "resultType": "merge",
              "query": [
                {
                  "field": "voteSeq",
                  "method": "matching",
                  "value": "{{:voteSeq}}"
                },
                {
                  "field": "voteItemSeq",
                  "method": "matching",
                  "value": "{{:voteItemSeq}}"
                }
              ],
              "response": {
                "rankNum": "",
                "rankGapNum": "",
                "voteRate": "",
                "voteNum": ""
              }
            },
            "myVoteYn": {
              "select": {
                "ds": "cjDb",
                "resultType": "value",
                "sql": "select if(count(*)>0,'Y','N') myVoteYn from votePrtcptHst where voteSeq=@{voteSeq} and voteItemSeq =@{voteItemSeq} and prtcpMbrId = @{makeIdValue(>,snsTypeCd,snsKey)}"
              }
            }
          }
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv102",
    "apiName": "국가별 투표 현황",
    "method": "GET",
    "parameters": [
      {
        "paramName": "voteSeq",
        "required": true
      },
      {
        "paramName": "snsKey",
        "required": true
      },
      {
        "paramName": "snsTypeCd",
        "required": true
      },
      {
        "paramName": "cntryCd",
        "required": true
      }
    ],
    "config": {
      "typeId": "voteItemStatsByCntry",
      "query": [
        {
          "field": "voteSeq",
          "method": "matching",
          "value": "{{:voteSeq}}"
        },
        {
          "field": "cntryCd",
          "method": "matching",
          "value": "{{:cntryCd}}"
        },
        {
          "referenceView": "voteSeq,voteItemSeq"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ],
      "response": {
        "_all_": "",
        "myVoteYn": {
          "select": {
            "ds": "cjDb",
            "resultType": "value",
            "sql": "select if(count(*)>0,'Y','N') myVoteYn from votePrtcptHst where voteSeq=@{voteSeq} and voteItemSeq =@{voteItemSeq} and prtcpMbrId = @{makeIdValue(>,snsTypeCd,snsKey)}"
          }
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv103",
    "apiName": "투표항목별 투표 현황",
    "method": "GET",
    "parameters": [
      {
        "paramName": "voteSeq",
        "required": true
      },
      {
        "paramName": "voteItemSeq",
        "required": true
      }
    ],
    "config": {
      "typeId": "voteItemStats",
      "query": [
        {
          "field": "voteSeq",
          "method": "matching",
          "value": "{{:voteSeq}}"
        },
        {
          "field": "voteItemSeq",
          "method": "matching",
          "value": "{{:voteItemSeq}}"
        },
        {
          "referenceView": "voteSeq,voteItemSeq"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ],
      "response": {
        "_all_": "",
        "cntryVoteList": {
          "typeId": "voteItemStatsByCntry",
          "query": [
            {
              "field": "voteSeq",
              "method": "matching",
              "value": "{{:voteSeq}}"
            },
            {
              "field": "voteItemSeq",
              "method": "matching",
              "value": "{{:voteItemSeq}}"
            },
            {
              "sorting": "cntryCd"
            },
            {
              "referenceView": "cntryCd"
            }
          ]
        },
        "sexVoteList": {
          "typeId": "voteItemStatsBySex",
          "query": [
            {
              "field": "voteSeq",
              "method": "matching",
              "value": "{{:voteSeq}}"
            },
            {
              "field": "voteItemSeq",
              "method": "matching",
              "value": "{{:voteItemSeq}}"
            },
            {
              "sorting": "sexCd"
            }
          ]
        },
        "weeklyRankList": {
          "typeId": "voteItemStatsByWly",
          "query": [
            {
              "field": "voteSeq",
              "method": "matching",
              "value": "{{:voteSeq}}"
            },
            {
              "field": "voteItemSeq",
              "method": "matching",
              "value": "{{:voteItemSeq}}"
            },
            {
              "sorting": "perdStDate desc",
              "limit": "5"
            }
          ]
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv104",
    "apiName": "아티스트별 주간 투표 현황",
    "method": "GET",
    "parameters": [
      {
        "paramName": "artistId",
        "required": false
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "wlyVoteStatsByArtist",
      "query": [
        {
          "field": "artistId",
          "method": "matching",
          "value": "{{:artistId}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv105",
    "apiName": "아티스트별 국가 투표 현황",
    "method": "GET",
    "parameters": [
      {
        "paramName": "artistId",
        "required": false
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "cntryVoteStatsByArtist",
      "query": [
        {
          "field": "artistId",
          "method": "matching",
          "value": "{{:artistId}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "cntryCd,artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv106",
    "apiName": "아티스트별 투표회원 현황",
    "method": "GET",
    "parameters": [
      {
        "paramName": "artistId",
        "required": false
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "voteMbrStatsByArtist",
      "query": [
        {
          "field": "artistId",
          "method": "matching",
          "value": "{{:artistId}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId,mbrId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv200",
    "apiName": "주별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "perdStDate",
        "required": true
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": true
      }
    ],
    "config": {
      "typeId": "artistVoteStatsByWly",
      "query": [
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv201",
    "apiName": "월별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "perdYm",
        "required": true
      }
    ],
    "config": {
      "typeId": "artistVoteStatsByMly",
      "query": [
        {
          "field": "perdYm",
          "method": "matching",
          "value": "{{:perdYm}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv202",
    "apiName": "년별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "perdYear",
        "required": true
      }
    ],
    "config": {
      "typeId": "artistVoteStatsByYear",
      "query": [
        {
          "field": "perdYear",
          "method": "matching",
          "value": "{{:perdYear}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv203",
    "apiName": "국가별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "cntryCd",
        "required": true
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "artistVoteStatsByCntry",
      "query": [
        {
          "field": "cntryCd",
          "method": "matching",
          "value": "{{:cntryCd}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "cntryCd,artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv204",
    "apiName": "성별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "sexCd",
        "required": true
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "artistVoteStatsBySex",
      "query": [
        {
          "field": "sexCd",
          "method": "matching",
          "value": "{{:sexCd}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv205",
    "apiName": "타입별 아티스트 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "typeCd",
        "required": true
      },
      {
        "perdStDate": "perdStDate",
        "required": false
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": false
      }
    ],
    "config": {
      "typeId": "artistVoteStatsByType",
      "query": [
        {
          "field": "typeCd",
          "method": "matching",
          "value": "{{:typeCd}}"
        },
        {
          "field": "perdStDate",
          "method": "matching",
          "value": "{{:perdStDate}}"
        },
        {
          "field": "perdFnsDate",
          "method": "matching",
          "value": "{{:perdFnsDate}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "referenceView": "artistId"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        }
      ]
    }
  },
  {
    "typeId": "apiConfig",
    "category": "vote",
    "apiId": "IfMwv206",
    "apiName": "전체 국가 투표현황",
    "method": "GET",
    "parameters": [
      {
        "perdStDate": "perdStDate",
        "required": true
      },
      {
        "perdFnsDate": "perdFnsDate",
        "required": true
      }
    ],
    "config": {
      "root": {
        "typeId": "cntryVoteStats",
        "query": [
          {
            "field": "perdStDate",
            "method": "matching",
            "value": "{{:perdStDate}}"
          },
          {
            "field": "perdFnsDate",
            "method": "matching",
            "value": "{{:perdFnsDate}}"
          },
          {
            "sorting": "{{:sorting}}"
          },
          {
            "referenceView": "cntryCd"
          },
          {
            "page": "{{:page}}",
            "pageSize": "{{:pageSize}}"
          }
        ]
      },
      "getTotalVoteNum": {
        "select": {
          "ds": "cjDb",
          "resultType": "value",
          "sql": "select sum(voteNum) as totalVoteNum from cntryVoteStats where perdStDate = @{perdStDate} and perdFnsDate = @{perdFnsDate}"
        }
      }
    }
  }
]
