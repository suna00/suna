[
  {
    "typeId": "apiConfig",
    "category": "comp",
    "apiId": "IfCom001",
    "apiName": "서비스 컴포넌트 상세조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "mainDivCd",
        "required": true
      },
      {
        "paramName": "svcTermlDivCd",
        "required": true
      },
      {
        "paramName": "showLoCd",
        "required": false
      }
    ],
    "config": {
      "getContsMetaDivTid": {
        "typeId": "mainBasInfo",
        "resultType": "none",
        "query": [
          {
            "field": "mainDivCd",
            "method": "matching",
            "value": "{{:mainDivCd}}"
          },
          {
            "field": "showLoCd",
            "method": "matching",
            "value": "{{:showLoCd}}"
          },
          {
            "field": "svcTermlDivCd",
            "method": "matching",
            "value": "{{:svcTermlDivCd}}"
          },
          {
            "field": "showYn",
            "method": "matching",
            "value": "true"
          },
          {
            "limit": "1",
            "sorting": "mainSeq desc"
          }
        ],
        "response": {
          "mainSeq": ""
        }
      },
      "root": {
        "typeId": "compItemInfo",
        "query": [
          {
            "field": "mainSeq",
            "method": "matching",
            "value": "{{:default(mainSeq,뺿뺿)}}"
          },
          {
            "sorting": "sortOdrg",
            "referenceView": "itemId,cnctContsId",
            "includeReferenced": true
          }
        ],
        "response": {
          "_all_": "",
          "refdAtribList": {
            "typeId": "compAtribInfo",
            "query": [
              {
                "field": "compItemSeq",
                "method": "referenceJoin",
                "value": "compItemSeq_matching={{:compItemSeq}}"
              },
              {
                "field": "cnctItemYn",
                "method": "matching",
                "value": "false"
              },
              {
                "referenceView": "contsId",
                "includeReferenced": true
              }
            ],
            "response": {
              "_all_": "",
              "contsId": {
                "field": "contsId",
                "referenceView": true,
                "response": {
                  "_all_": "",
                  "contsMetaId": {
                    "field": "contsMetaId",
                    "referenceView": true,
                    "response": {
                      "_all_": "",
                      "artistInfo": {
                        "typeId": "artist",
                        "resultType": "merge",
                        "query": [
                          {
                            "field": "artistId",
                            "method": "matching",
                            "value": "{{:artistId}}"
                          }
                        ],
                        "response": {
                          "artistSex": "sex",
                          "artistTypeCd": "typeCd"
                        }
                      }
                    }
                  },
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat( if(@{newsId} is not null ,'news',if(@{pgmVideoId} is not null,'pgmVideo',if(@{groupPhotoId} is not null,'groupPhoto',''))),'::',if(@{newsId} is not null ,@{newsId},if(@{pgmVideoId} is not null,@{pgmVideoId},if(@{groupPhotoId} is not null,@{groupPhotoId},''))))"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*) as likeNum from contsLikeInfo where contsMetaId = concat( if(@{newsId} is not null ,'news',if(@{pgmVideoId} is not null,'pgmVideo',if(@{groupPhotoId} is not null,'groupPhoto',''))),'::',if(@{newsId} is not null ,@{newsId},if(@{pgmVideoId} is not null,@{pgmVideoId},if(@{groupPhotoId} is not null,@{groupPhotoId},''))))"
                    }
                  },
                  "singlePhotoNm": {
                    "resultType": "size",
                    "field": "compontSinglePhotoIds"
                  }
                }
              },
              "newsHubNewsList": {
                "typeId": "news",
                "query": [
                  {
                    "field": "langCd",
                    "method": "matching",
                    "value": "{{:langCd}}"
                  },
                  {
                    "field": "newsNm",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  },
                  {
                    "field": "findKywrd",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  }
                ],
                "response": {
                  "_all_": "",
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat('news','::',@{newsId})"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as likeNum from contsLikeInfo where contsMetaId = concat('news','::',@{newsId})"
                    }
                  }
                }
              },
              "newsHubVodList": {
                "typeId": "pgmVideo",
                "query": [
                  {
                    "field": "title",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  },
                  {
                    "field": "searchKeyword",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  }
                ],
                "response": {
                  "_all_": "",
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat('pgmVideo','::',@{contentId})"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as likeNum from contsLikeInfo where contsMetaId = concat('pgmVideo','::',@{contentId})"
                    }
                  }
                }
              }
            }
          },
          "cnctRefdAtribList": {
            "typeId": "compAtribInfo",
            "query": [
              {
                "field": "compItemSeq",
                "method": "referenceJoin",
                "value": "compItemSeq_matching={{:compItemSeq}}"
              },
              {
                "field": "cnctItemYn",
                "method": "matching",
                "value": "true"
              },
              {
                "referenceView": "contsId",
                "includeReferenced": true
              }
            ],
            "response": {
              "_all_": "",
              "contsId": {
                "field": "contsId",
                "referenceView": true,
                "response": {
                  "_all_": "",
                  "contsMetaId": {
                    "field": "contsMetaId",
                    "referenceView": true,
                    "response": {
                      "_all_": "",
                      "artistInfo": {
                        "typeId": "artist",
                        "resultType": "merge",
                        "query": [
                          {
                            "field": "artistId",
                            "method": "matching",
                            "value": "{{:artistId}}"
                          }
                        ],
                        "response": {
                          "artistSex": "sex",
                          "artistTypeCd": "typeCd"
                        }
                      }
                    }
                  },
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat( if(@{newsId} is not null ,'news',if(@{pgmVideoId} is not null,'pgmVideo',if(@{groupPhotoId} is not null,'groupPhoto',''))),'::',if(@{newsId} is not null ,@{newsId},if(@{pgmVideoId} is not null,@{pgmVideoId},if(@{groupPhotoId} is not null,@{groupPhotoId},''))))"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*) as likeNum from contsLikeInfo where contsMetaId = concat( if(@{newsId} is not null ,'news',if(@{pgmVideoId} is not null,'pgmVideo',if(@{groupPhotoId} is not null,'groupPhoto',''))),'::',if(@{newsId} is not null ,@{newsId},if(@{pgmVideoId} is not null,@{pgmVideoId},if(@{groupPhotoId} is not null,@{groupPhotoId},''))))"
                    }
                  },
                  "singlePhotoNm": {
                    "resultType": "size",
                    "field": "compontSinglePhotoIds"
                  }
                }
              },
              "newsHubNewsList": {
                "typeId": "news",
                "query": [
                  {
                    "field": "langCd",
                    "method": "matching",
                    "value": "{{:langCd}}"
                  },
                  {
                    "field": "newsNm",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  },
                  {
                    "field": "findKywrd",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  }
                ],
                "response": {
                  "_all_": "",
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat('news','::',@{newsId})"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as likeNum from contsLikeInfo where contsMetaId = concat('news','::',@{newsId})"
                    }
                  }
                }
              },
              "newsHubVodList": {
                "typeId": "pgmVideo",
                "query": [
                  {
                    "field": "title",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  },
                  {
                    "field": "searchKeyword",
                    "method": "matchingShould",
                    "value": "{{:default(newsHubKywrd,뺿뺿)}}"
                  }
                ],
                "response": {
                  "_all_": "",
                  "replNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as replNum from replInfo where contsMetaId = concat('pgmVideo','::',@{contentId})"
                    }
                  },
                  "likeNum": {
                    "select": {
                      "ds": "cjDb",
                      "resultType": "value",
                      "sql": "select count(*)as likeNum from contsLikeInfo where contsMetaId = concat('pgmVideo','::',@{contentId})"
                    }
                  }
                }
              }
            }
          },
          "mcdMusicChartList": {
            "typeId": "mcdChartBasInfo",
            "query": [
              {
                "sorting": "mstIdx desc",
                "limit": "1",
                "includeReferenced": true
              }
            ]
          }
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "comp",
    "apiId": "IfCom002",
    "apiName": "서비스 메뉴 상세조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "cntryCd",
        "required": true
      },
      {
        "paramName": "svcTermlDivCd",
        "required": true
      }
    ],
    "config": {
      "root": {
        "typeId": "svcMenuInfo",
        "query": [
          {
            "field": "svcMenuGroupSeq",
            "method": "referenceJoin",
            "value": "showCntryCdList_matching={{:cntryCd}}&svcDvcDivCd_matching={{:svcTermlDivCd}}&showYn_matching=true&limit=1"
          },
          {
            "includeReferenced": true
          }
        ]
      },
      "anchor": {
        "typeId": "banrBasInfo",
        "query": [
          {
            "field": "svcTermlDivCd",
            "method": "matching",
            "value": "{{:svcTermlDivCd}}"
          },
          {
            "field": "showCntryCdList",
            "method": "matching",
            "value": "{{:cntryCd}}"
          },
          {
            "field": "banrTypeCd",
            "method": "matching",
            "value": "4"
          },
          {
            "field": "showYn",
            "method": "matching",
            "value": "true"
          },
          {
            "sorting": "banrSeq desc"
          },
          {
            "includeReferenced": true
          }
        ]
      }
    }
  }
]
