[
  {
    "typeId": "apiConfig",
    "category": "svcEvent",
    "apiId": "IfEvt001",
    "apiName": "MAMA 수상자 조회",
    "method": "GET",
    "parameters": [
      {
        "paramName": "page",
        "required": false
      },
      {
        "paramName": "pageSize",
        "required": false
      },
      {
        "paramName": "sorting",
        "required": false
      },
      {
        "paramName": "langCd",
        "required": false
      },
      {
        "paramName": "awardYear",
        "required": true
      }
    ],
    "config": {
      "typeId": "mamaAwardSctnInfo",
      "query": [
        {
          "field": "awardYear",
          "method": "matching",
          "value": "{{:awardYear}}"
        },
        {
          "sorting": "{{:sorting}}"
        },
        {
          "page": "{{:page}}",
          "pageSize": "{{:pageSize}}"
        },
        {
          "includeReferenced": true
        }
      ],
      "response": {
        "awardSctnSeq": "",
        "awardYear": "",
        "awardSctnCd": "",
        "awardSctnDesc": "",
        "refdWinnerList": {
          "typeId": "mamaSctnWinner",
          "query": [
            {
              "field": "awardSctnSeq",
              "method": "referenceJoin",
              "value": "awardSctnSeq_matching={{:awardSctnSeq}}&sorting=sortOdrg"
            }
          ]
        }
      }
    }
  },
  {
    "typeId": "apiConfig",
    "category": "svcEvent",
    "apiId": "IfEvt002",
    "apiName": "당첨자 정보 전송",
    "method": "POST",
    "parameters": [
      {
        "paramName": "voteSeq",
        "required": true
      },
      {
        "paramName": "snsTypeCd",
        "required": true
      },
      {
        "paramName": "snsKey",
        "required": true
      },
      {
        "paramName": "mbrFirstName",
        "required": false
      },
      {
        "paramName": "mbrLastName",
        "required": false
      },
      {
        "paramName": "email",
        "required": false
      },
      {
        "paramName": "mblNo",
        "required": false
      },
      {
        "paramName": "homeAdr",
        "required": false
      },
      {
        "paramName": "memo",
        "required": false
      },
      {
        "paramName": "indvInfoAgreeYn",
        "required": false
      },
      {
        "paramName": "selItemAgreeYn",
        "required": false
      }
    ],
    "config": {
      "getVotePwnrSeq": {
        "typeId": "votePwnrInfo",
        "query": [
          {
            "field": "pwnrBasSeq",
            "method": "referenceJoin",
            "value": "voteSeq_matching={{:voteSeq}}&limit=1"
          },
          {
            "field": "mbrId",
            "method": "matching",
            "value": "{{:snsTypeCd}}>{{:snsKey}}"
          },
          {
            "sorting": "votePwnrSeq desc",
            "limit": 1
          }
        ],
        "response": {
          "votePwnrSeq": ""
        }
      },
      "updateInfo": {
        "typeId": "votePwnrInfo",
        "event": "update",
        "if": "{{:aboveInt(votePwnrSeq,0)}}",
        "data": {
          "votePwnrSeq": "{{:votePwnrSeq}}",
          "mbrFirstName": "{{:mbrFirstName}}",
          "mbrLastName": "{{:mbrLastName}}",
          "email": "{{:email}}",
          "mblNo": "{{:mblNo}}",
          "homeAdr": "{{:homeAdr}}",
          "memo": "{{:memo}}",
          "indvInfoAgreeYn": "{{:indvInfoAgreeYn}}",
          "selItemAgreeYn": "{{:selItemAgreeYn}}"
        }
      }
    }
  }
]
